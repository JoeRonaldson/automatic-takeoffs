(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(7),i=n.n(c),s=(n(17),n(2)),o=n.n(s),u=n(4),p=n(3),d=(n(19),n(8)),h=n.n(d),f=(n(31),n.p+"static/media/demoImage.d8fb7814.jpg"),l=n(0);function j(e){var t=e.imageToCrop,n=e.onImageCropped,a=Object(r.useState)({unit:"px",x:300,y:50,width:200,height:200}),c=Object(p.a)(a,2),i=c[0],s=c[1],d=Object(r.useState)(),j=Object(p.a)(d,2),g=j[0],b=j[1];function m(){return(m=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g&&t.width&&t.height)){e.next=5;break}return e.next=3,O(g,t,"croppedImage.jpeg");case 3:r=e.sent,n(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){var r=document.createElement("canvas"),a=e.naturalWidth/e.width,c=e.naturalHeight/e.height;return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,t.x*a,t.y*c,t.width*a,t.height*c,0,0,t.width,t.height),new Promise((function(e,t){r.toBlob((function(r){if(r){r.name=n;var a=window.URL.createObjectURL(r);e(a)}else t(new Error("Canvas is empty"))}),"image/jpeg")}))}return Object(l.jsx)(h.a,{src:t||f,crop:i,ruleOfThirds:!0,onImageLoaded:function(e){return b(e)},onComplete:function(e){return function(e){return m.apply(this,arguments)}(e)},onChange:function(e){return s(e)},crossorigin:"anonymous"})}j.defaultProps={onImageCropped:function(){}};var g=j,b=n(9),m=n(10),O=n(12),v=n(11);n(33),r.Component;var x=function(e){return console.log(e.serverResponse),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Results"}),Object(l.jsx)("ul",{children:Object(l.jsxs)("li",{children:[Object(l.jsxs)("p",{children:["Takeoff Status: ",e.serverResponse.status," "]}),Object(l.jsxs)("p",{children:["The total number of matches is: ",e.serverResponse.takeoffCount]})]})})]})};var w=function(){var e=Object(r.useState)(void 0),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(void 0),i=Object(p.a)(c,2),s=i[0],d=i[1],h=Object(r.useState)(void 0),j=Object(p.a)(h,2),b=j[0],m=j[1],O=Object(r.useState)({status:"Ready to count",resultImage:null,takeoffCount:""}),v=Object(p.a)(O,2),w=v[0],C=v[1];function I(e,t,n){var r=new Image;r.onerror=n,r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0,e.width,e.height),e.toBlob(t)},r.src=e}return Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){var e=t.result;a(e)})),t.readAsDataURL(e.target.files[0])}}}),Object(l.jsx)("div",{children:Object(l.jsx)(g,{imageToCrop:n,onImageCropped:function(e){return d(e)}})}),s&&Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Cropped Image"}),Object(l.jsx)("img",{alt:"Cropped Img",src:s})]}),Object(l.jsxs)("div",{className:"app input",children:[Object(l.jsx)("button",{onClick:function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise((function(e,t){n.onload=function(t){e(t.target.result)}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(e){return a.apply(this,arguments)}function a(){return(a=Object(u.a)(o.a.mark((function t(n){var r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n);case 2:return r=t.sent,t.next=5,r.blob();case 5:return a=t.sent,t.next=8,e(a);case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var c=r(s).then((function(e){return e})),i=r(n||f).then((function(e){return e})),p=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:return t=e.sent,e.next=5,i;case 5:n=e.sent,r={status:"In-progress",templateImage:t,image:n,takeoffCount:null},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},fetch("/api/send",a).then((function(e){return e.json()})).then((function(e){return C(e),I(e.resultImage,(function(e){var t=window.URL.createObjectURL(e);m(t)}),(function(e){})),console.log("Response Object:",w)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();p()},children:"Count Items"}),Object(l.jsx)(x,{serverResponse:w})]}),Object(l.jsx)("div",{children:Object(l.jsx)("img",{alt:"Result Img",src:b,className:"img-fluid"})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),C()}},[[34,1,2]]]);
//# sourceMappingURL=main.d8c1c495.chunk.js.map