(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(7),i=n.n(c),s=(n(13),n(2)),o=n.n(s),u=n(3),d=n(4),h=(n(15),n(8)),p=n.n(h),l=(n(27),n.p+"static/media/demoImage.f2ef97aa.jpg"),f=n(0);function j(e){var t=e.imageToCrop,n=e.onImageCropped,a=Object(r.useState)({unit:"px",x:300,y:50,width:200,height:200}),c=Object(d.a)(a,2),i=c[0],s=c[1],h=Object(r.useState)(),j=Object(d.a)(h,2),g=j[0],b=j[1];function m(){return(m=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g&&t.width&&t.height)){e.next=5;break}return e.next=3,x(g,t,"croppedImage.jpeg");case 3:r=e.sent,n(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,n){var r=e,a=r.naturalWidth/r.width,c=r.naturalHeight/r.height,i=document.createElement("canvas");return i.width=t.width*a,i.height=t.height*c,i.getContext("2d").drawImage(e,t.x*a,t.y*c,t.width*a,t.height*c,0,0,t.width*a,t.height*c),new Promise((function(e,t){i.toBlob((function(r){if(r){r.name=n;var a=window.URL.createObjectURL(r);e(a)}else t(new Error("Canvas is empty"))}),"image/jpeg")}))}return Object(f.jsx)(p.a,{src:t||l,crop:i,ruleOfThirds:!0,onImageLoaded:function(e){return b(e)},onComplete:function(e){return function(e){return m.apply(this,arguments)}(e)},onChange:function(e){return s(e)},crossorigin:"anonymous"})}j.defaultProps={onImageCropped:function(){}};var g=j;n(29);var b=function(e){return Object(f.jsx)("div",{className:"table",children:Object(f.jsxs)("table",{children:[Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Item"}),Object(f.jsx)("th",{children:"Count"}),Object(f.jsx)("th",{children:"Status"})]}),e.serverResponse.map((function(e,t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("img",{alt:"template",src:e.templateImg,"max-height":75,"max-width":150})}),Object(f.jsx)("td",{children:e.takeoffCount}),Object(f.jsx)("td",{children:e.status})]},t)}))]})})},m=[];var x=function(){var e=Object(r.useState)(void 0),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(void 0),i=Object(d.a)(c,2),s=i[0],h=i[1];function p(e,t,n){var r=new Image;r.onerror=n,r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0,e.width,e.height),e.toBlob(t)},r.src=e}return Object(f.jsxs)("div",{className:"app",children:[Object(f.jsxs)("label",{className:"drawing-upload",children:[Object(f.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){var e=t.result;a(e)})),t.readAsDataURL(e.target.files[0])}}}),"Upload Drawing"]}),Object(f.jsx)("div",{children:Object(f.jsx)(g,{imageToCrop:n,onImageCropped:function(e){return h(e)}})}),s&&Object(f.jsx)("div",{className:"croppedImg",children:Object(f.jsx)("img",{alt:"Cropped Img",src:s})}),Object(f.jsxs)("div",{className:"app input",children:[Object(f.jsx)("button",{className:"button",onClick:function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise((function(e,t){n.onload=function(t){e(t.target.result)}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(e){return c.apply(this,arguments)}function c(){return(c=Object(u.a)(o.a.mark((function t(n){var r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n);case 2:return r=t.sent,t.next=5,r.blob();case 5:return a=t.sent,t.next=8,e(a);case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var i=r(s).then((function(e){return e})),d=r(n||l).then((function(e){return e})),h=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:return t=e.sent,e.next=5,d;case 5:n=e.sent,r={status:"In-progress",templateImage:t,image:n,takeoffCount:null},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},fetch("/api/send",c).then((function(e){return e.json()})).then((function(e){return p(e.resultImage,(function(e){var t=window.URL.createObjectURL(e);a(t)}),(function(e){})),m.push(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h()},children:"Count Items"}),Object(f.jsx)(b,{serverResponse:m})]})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root")),O()}},[[30,1,2]]]);
//# sourceMappingURL=main.6b7be140.chunk.js.map